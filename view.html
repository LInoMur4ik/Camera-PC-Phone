<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Просмотр (Компьютер)</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f0f0f0; }
        video { width: 80%; background: #000; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .controls { margin: 20px; }
        input, button { padding: 10px; font-size: 16px; }
    </style>
</head>
<body>
    <h1>Просмотр трансляции</h1>
    <div class="controls">
        <input type="text" id="roomId" placeholder="Введите имя комнаты">
        <button onclick="connect()">Подключиться</button>
    </div>
    <video id="remoteVideo" autoplay playsinline></video>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script>
        const peer = new Peer(); // Генерируем случайный ID для компьютера

        function connect() {
            const targetId = document.getElementById('roomId').value;
            const call = peer.call(targetId, null); // "Звоним" на телефон
            
            call.on('stream', remoteStream => {
                document.getElementById('remoteVideo').srcObject = remoteStream;
            });

            call.on('error', err => {
                alert('Ошибка подключения: ' + err.type);
            });
        }
    </script>
</body>
</html>